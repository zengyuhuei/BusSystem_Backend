<!DOCTYPE html>
<html lang="en">

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>基隆公車調派系統-個人基本資料</title>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.0.1/js/tempusdominus-bootstrap-4.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.0.1/css/tempusdominus-bootstrap-4.min.css" />

		<link rel="stylesheet" href="../css/main.css">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
		<script src="../js/Personal_basic_information.js"></script>
	</head>

	<script type="text/javascript">

		//把值轉成json檔
		function display(){

				/*if(gender1.checked==true){
						var gg = 1;
				}
				else if(gender2.checked==true){
						gg = 0;
				}

				var json = {
						'name': InputName.value,
						'gender': gg,
						'birthday': $("#birthday").find("input").val(),
						'phone_number': InputPhone1.value,
						'email': email.value,
						'identification_id': identification.value,
						'account': account.value,
						'address': address.value,
						'picture': customFile.value
				}
				var kk = JSON.stringify(json);
				console.log(kk);

				$.ajax({
						type: 'POST',
						url: "http://127.0.0.1:3000/add_info_to_db",
						dataType: 'json',
						data: JSON.stringify({
								'name': InputName.value,
								'gender': gg,
								'birthday': $("#birthday").find("input").val(),
								'phone_number': InputPhone1.value,
								'email': email.value,
								'identification_id': identification.value,
								'account': account.value,
								'address': address.value,
								'picture': customFile.value
						}),
						success: function(data) {
							console.log(data);
						},
						error: function(xhr, type) {
						}
				});*/
		}

		//測試資料
		/*var js = {
				'name': 'tseng', 
				'gender': 0, 
				'birthday': '2019/04/11',
				'phone_number': '0918338687',
				'email': 'zengyuhuei@gmail.com', 
				'identification_id': 'F123456789', 
				'account': '123456',
				'address': 'ananaana',
				'picture': 'file.jpg'
		}*/

		//讀取資料庫資料
		function load(){
			var idd = "5cbd7f162af88f755a4390da";
			$.ajax({
					type: 'GET',
					url: "http://127.0.0.1:3000/getInfo?id="+idd,
					dataType: 'json',
					success: function(data) {
						console.log(data);
						loaddata(data);
					},
					error: function(xhr, type) {
					}
			});

		}
		function loaddata(js)
		{
				InputName.value = js.name;
				if(js.gender==1){
						gender1.checked = true;
						gender2.checked = false;
				}
				else if(js.gender==0){
						gender1.checked = false;
						gender2.checked = true;
				}
				date.value = js.birthday;
				InputPhone1.value = js.phone_number;
				email.value = js.email;
				identification.value = js.identification_id;
				employee.value = js._id;
				account.value = js.account;
				address.value = js.address;
				//customFile.value = js.picture;
		}
</script>

	<body onload="load()">

		<nav class="navbar navbar-expand-xl navbar-dark bg-dark" id="mainNav">
		  <div class="container">
			  <a class="navbar-brand" id="#">基隆公車調派系統</a>
			  <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			  </button>
			
			<div class="navbar-collapse collapse" id="navbarText">
			  <ul class="nav navbar-nav mr-auto">
					<li class="nav-item"><a class = "nav-link" href="./bus_driver_people_number_return.html">乘客人數回報</a></li>
					<li class="nav-item"><a class = "nav-link" href="./bus_driver_emergency_return.html"> 突發狀況回報</a></li>
					<li class="nav-item active"><a class = "nav-link" href="./bus_driver_personal_basic_information.html"> 個人基本資料</a></li>
					<li class="nav-item"><a class = "nav-link" href="#"> 導航模式</a></li>
					<li class="nav-item"><a class = "nav-link" href="./bus_driver_change_password.html"> 修改密碼</a></li>
				</ul>
				<ul class="navbar-nav">
					<a href="../Manager/sing_in.html" class="btn btn-outline-primary" role="button" aria-pressed="true">登出</a>
				</ul>
				
			</div>
		  </div>
		</nav>
	   <div class="container">

			<div class="intro-text my-3">
				<h1>個人基本資料</h1>
			</div>
			<form method = "post" action = "http://127.0.0.1:3000/add_info_to_db" enctype = "multipart/form-data">
			  <div class = "row">
				<div class="col-sm-7 col-lg-7 col-md-7">
				  <div class="form-group row">
					<label for="InputName" class="col-xs-3 col-md-auto col-form-label"><h6>姓名：</h6></label>
					<input type="text" class="form-control col-xs-6 col-md-6 col-lg-6" id="InputName" placeholder="請輸入姓名" name="name" required>
				  </div>
				  
				  <div class="form-group row">
					<legend class="col-xs-3 col-md-auto col-form-label"><h6>性別：</h6></legend>
					<div class="col-sm-1 mt-2 mt-md-1">
						<div class="form-check form-check-inline">
						  <input class="form-check-input" type="radio" name="gender" id="gender1" value="0" required>
						  <label class="form-check-label" for="gender1"><h6>男</h6></label>
						</div>
					</div>
					<div class="col-sm-1 mt-2 mt-md-1">
						<div class="form-check form-check-inline">
						  <input class="form-check-input" type="radio" name="gender" id="gender2" value="1" required>
						  <label class="form-check-label" for="gender2"><h6>女</h6></label>
						</div>
					</div>
				  </div>
				  
				  <div class="form-group row">
					<label for="birthday" class="col-xs-3 col-md-auto col-form-label">
						<h6>生日：</h6>
					</label>
					
					
					<div class="col-xs-6 col-md-6 col-lg-6">
						<div class="form-group">
							<div class="input-group date" id="birthday" data-target-input="nearest">
								<input type="text" class="form-control datetimepicker-input" id="date" data-target="#birthday" name="birthday" required>
								<div class="input-group-append" data-target="#birthday" data-toggle="datetimepicker">
									<div class="input-group-text"><i class="fa fa-calendar"></i></div>
								</div>
							</div>
						</div>
					</div>
					
					
				  </div>
				  
				  <div class="form-group row">
					<label for="InputPhone1" class="col-xs-3 col-md-auto col-form-label">
						<h6>電話：（手機）</h6>
					</label>
					<input type="phone" class="form-control col-xs-6 col-md-6 col-lg-6" id="InputPhone1" placeholder="請輸入手機號碼" name="phone_number" required>
				  </div>
				  
				  <div class="form-group row">
					<label for="staticEmail" class="col-sm-3 col-md-auto col-form-label">
					<h6>e-mail：</h6>
					</label>
					 <input type="text" class="form-control col-xs-6 col-md-6 col-lg-6" id="email" placeholder="email@example.com" name="email" required>
				  </div>
				  
				  <div class="form-group row">
					<label for="identification" class="col-xs-3 col-md-auto col-form-label">
						<h6>身分證字號：</h6>
					</label>
					<input type="identification" class="form-control col-xs-6 col-md-6 col-lg-6" id="identification" name="identification_id" required>
				  </div>
				  
				  <div class="form-group row">
					<label for="employee" class="col-xs-3 col-md-auto col-form-label">
						<h6>員工代號：</h6>
					</label>
					<input type="employee" class="form-control col-xs-6 col-md-6 col-lg-6" id="employee" required>
				  </div>
				  
				  <div class="form-group row">
					<label for="account" class="col-xs-3 col-md-auto col-form-label">
						<h6>帳戶：</h6>
					</label>
					<input type="account" class="form-control col-xs-6 col-md-6 col-lg-6" id="account" name="account" required>
				  </div>
				  
				  <div class="form-group row">
					<label for="address" class="col-xs-3 col-md-auto col-form-label">
						<h6>通訊地址：</h6>
					</label>
					<input type="address" class="form-control col-xs-9 col-md-9 col-lg-9" id="address" name="address" required>
				  </div>
				  
				  <input type="submit" class="btn btn-primary"  onclick='display()'>儲存</button>
				  <div class="form-group row"></div>

			    </div>
			    <div class="col-sm-4 col-lg-4 col-md-4">
					<div class="form-group">
						<div class="form-group row">
							<label for="address" class="col-xs-3 col-md-auto col-form-label">
								<h6>上傳大頭照：</h6>
							</label>
						  <div class="custom-file">
							<input type="file" class="custom-file-input" id="customFile" name="myfile" required>
							<label class="custom-file-label" for="customFile">Choose file</label>
						  </div>

							
						</div>
						<img id='img-upload'/>
					</div>
					
			    </div>
			  </div>
			</form>


			  
			  
			  
		</div>
	   

	</body>
</html>
